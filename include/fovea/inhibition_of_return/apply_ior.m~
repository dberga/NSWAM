function [ out_map ] = apply_ior( map, time,iter, struct )

    
    inhibition_factor = get_ior_factor(time,struct.zli_params.t_mem,iter,).*struct.gaze_params.ior_factor_ctt;
    
    inhibition = get_ior_gaussian(struct.gaze_params.fov_x, struct.gaze_params.fov_y, inhibition_factor, struct.gaze_params.ior_angle, struct.gaze_params.orig_height, struct.gaze_params.orig_width, struct.gaze_params.img_diag_angle);
    
    out_map = map+inhibition;
    
end

